{"version":3,"sources":["webpack://splunk-assist-main/./src/http/services/httpSupervisorService.ts","webpack://splunk-assist-main/./src/http/services/httpLicencerService.ts","webpack://splunk-assist-main/./src/http/services/httpConfService.ts","webpack://splunk-assist-main/./src/http/services/httpAccessService.ts","webpack://splunk-assist-main/./src/ui/common/providers/ServiceProvider.tsx","webpack://splunk-assist-main/./src/http/services/index.ts","webpack://splunk-assist-main/./src/ui/onboarding/common/OnboardingState.ts","webpack://splunk-assist-main/./src/ui/common/hooks/useInterval.ts","webpack://splunk-assist-main/./src/ui/onboarding/components/AssistPendingActivation/AssistPendingActivation.styles.ts","webpack://splunk-assist-main/./src/ui/onboarding/components/AssistPendingActivation/AssistPendingDetails.tsx","webpack://splunk-assist-main/./src/ui/onboarding/components/AssistPendingActivation/AssistPendingActivation.tsx","webpack://splunk-assist-main/./src/ui/onboarding/components/ActivationFailed.tsx","webpack://splunk-assist-main/./src/ui/common/components/AssistApp.tsx","webpack://splunk-assist-main/./src/ui/common/providers/Assist/AssistProvider.tsx","webpack://splunk-assist-main/./src/ui/common/utils/tenant.ts","webpack://splunk-assist-main/./src/telemetry/utils.ts","webpack://splunk-assist-main/./src/telemetry/TelemetryContext.tsx","webpack://splunk-assist-main/./src/telemetry/TelemetryProvider.tsx","webpack://splunk-assist-main/./src/ui/routers/AssistRouter.tsx"],"names":["createHttpSupervisorService","apiClient","activate","async","code","licenseId","RequestError","response","post","method","path","body","license_id","status","message","valid","error","getIsAssistEnabled","get","connectivityOpen","context","network_connectivity","optinStatus","assist_optin","tenantStatus","tenant_status","assistEnabled","assist_enabled","sudOptinStatus","sud_optin","createHTTPLicenserService","getLicenseGUID","queryParams","output_mode","content","entry","addonGuids","reduce","add_ons","guids","addon","parameters","guid","push","filter","includes","toLowerCase","createHTTPConfService","getAssistEnv","find","value","name","e","createHTTPAccessService","getCurrentContext","username","email","ServicesContext","createContext","ServiceProvider","children","services","useMemo","APIClient","shouldUseSCS","supervisorService","licenserService","confService","accessService","createHttpServices","Provider","useServices","useContext","Error","ONBOARDING_STATE_PENDING","ONBOARDING_STATE_RUNNING","ONBOARDING_STATE_COMPLETED","useInterval","callback","delay","intervalRef","useRef","savedCallback","useEffect","current","tick","window","setInterval","clearInterval","AssistPendingContainer","styled","div","StyledHeading","Heading","variables","spacingLarge","Subheading","contentColorDefault","ContactSupportLinkStyle","Link","fontSizeLarge","PendingActivationState","securingConnectionsDetails","title","optInActivationDetails","altMessage","getPendingActivationDetails","state","index","INITIAL","OPT_IN","length","getNextOptInActivationDetails","TENANT_CREATING","getPendingActivationState","TenantStatusState","UNKNOWN","AssistStatuses","ENABLED","CREATING","ACTIVE","COMPLETED","AssistPendingActivation","reloadAssistContext","currentIndex","setCurrentIndex","useState","isActivationDelayed","setActivationDelayed","useAssist","activationState","pendingStateDetails","size","level","style","color","to","createDocsURL","openInNewContext","ActivationFailed","data-test","appearance","AssistEnabledRoutes","lazy","AssistDisabledRoutes","Loader","Center","GlobalMessage","Message","spacingXSmall","backgroundColorFloating","AppContainer","AssistApp","isTest","loadingState","reload","globalMessageStatus","setGlobalMessageStatus","sessionStorage","getItem","onRemoveGlobalMessage","useCallback","setItem","onboardingState","setOnboardingState","onUpdateOnboardingState","isLoadingState","invalidTenantStatuses","DISABLED","isPending","fallback","onRequestRemove","type","onUpdateOnboarding","AssistProvider","assist","handleError","useErrorHandler","lastRefresh","setLastRefresh","useLoadAsync","alwaysReset","old","Number","MAX_SAFE_INTEGER","useProvideAssist","AssistContext","loadTenant","isSE","location","pathname","parts","split","pop","ASSIST_ENV_TO_TELEMETRY_ENV","setupTelemetry","assistEnv","env","undefined","telemetry","createTelemetry","splunkOtelPlugin","createSplunkOtelPlugin","appType","appName","environment","shouldRemovePII","addPlugin","captureDOMEvent","targetElement","dataFound","currentElem","dataset","telemetryData","parentElement","JSON","parse","eventName","attributes","track","listenForDOMEvents","element","document","addEventListener","target","TelemetryContext","TelemetryContextProvider","TelemetryProvider","disableTelemetry","called","setCalled","providerDOM","userContext","identify","tenant","user","ref","AssistRoutes","history","useHistory","RepoProvider","testFlags","NavUtilsProvider","Wrapper","colorScheme","AssistRouter","props"],"mappings":"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","file":"2.2.js?88b802be893f067318bb","sourcesContent":["import { RequestError } from '../../ui/common/repos/RequestError';\nimport { SupervisorService } from '../../ui/common/services/supervisorService';\nimport { APIClient } from '../api/APIClient';\n\nexport function createHttpSupervisorService(apiClient: APIClient): SupervisorService {\n    return {\n        activate: async (code, licenseId) => {\n            try {\n                if (!licenseId) {\n                    throw new RequestError('POST', 'activate', 'assist/onboard', 404);\n                }\n                const response = await apiClient.post('activate', {\n                    method: 'POST',\n                    path: 'assist/onboard',\n                    body: {\n                        code,\n                        license_id: licenseId,\n                    },\n                });\n                if (response.status === 'creating' || response.status === 'active') {\n                    return {\n                        message: 'Your account was successfully linked with your deployment',\n                        valid: true,\n                    };\n                }\n            } catch (error) {\n                if (error instanceof RequestError) {\n                    return {\n                        code: error.status,\n                        valid: false,\n                    };\n                }\n            }\n            return {\n                code: null,\n                valid: false,\n            };\n        },\n        getIsAssistEnabled: async () => {\n            const response = await apiClient.get('getOptinStatus', {\n                method: 'GET',\n                path: 'assist/optin_status',\n            });\n            return {\n                connectivityOpen: response.context?.network_connectivity,\n                optinStatus: response.context?.assist_optin,\n                tenantStatus: response.context?.tenant_status,\n                assistEnabled: response.assist_enabled,\n                sudOptinStatus: response.context?.sud_optin,\n            };\n        },\n    } as SupervisorService;\n}\n","import reduce from 'lodash/reduce';\nimport { APIClient } from '../api/APIClient';\nimport { LicenserService } from '../../ui/common/services/licencerService';\n\n/* eslint-disable camelcase */\nexport function createHTTPLicenserService(apiClient: APIClient): LicenserService {\n    return {\n        getLicenseGUID: async () => {\n            try {\n                const response = await apiClient.get('getLicenseInfo', {\n                    method: 'GET',\n                    path: 'licenser/localslave',\n                    queryParams: {\n                        output_mode: 'json',\n                    },\n                });\n                const { content } = response.entry[0];\n\n                // retrieve addon license guids\n                const addonGuids = reduce(\n                    content.add_ons,\n                    (guids, addon) => {\n                        if (addon?.parameters?.guid) {\n                            guids.push(addon.parameters.guid);\n                        }\n                        return guids;\n                    },\n                    [] as string[]\n                );\n\n                // filter out add on licenses\n                const licenseGUID = content.guid.filter((guid) => !addonGuids.includes(guid));\n\n                // return the first valid license in the array\n                return licenseGUID[0].toLowerCase();\n            } catch {\n                return null;\n            }\n        },\n    } as LicenserService;\n}\n","import { ConfService } from '../../ui/common/services/confService';\nimport { APIClient } from '../api/APIClient';\n\nexport function createHTTPConfService(apiClient: APIClient): ConfService {\n    return {\n        getAssistEnv: async () => {\n            try {\n                const response = await apiClient.get('getAssistEnv', {\n                    method: 'GET',\n                    path: 'properties/assist/cloud',\n                    queryParams: {\n                        output_mode: 'json',\n                    },\n                });\n                const scsEnv = response.entry.find((value) => value.name === 'scs_environment');\n                return scsEnv.content;\n            } catch (e) {\n                return 'production';\n            }\n        },\n    } as ConfService;\n}\n","import { APIClient } from '../api/APIClient';\nimport { AccessService } from '../../ui/common/services/accessService';\n\n/* eslint-disable camelcase */\nexport function createHTTPAccessService(apiClient: APIClient): AccessService {\n    return {\n        getCurrentContext: async () => {\n            try {\n                const response = await apiClient.get('getCurrentContext', {\n                    method: 'GET',\n                    path: 'authentication/current-context',\n                    queryParams: {\n                        output_mode: 'json',\n                    },\n                });\n                const { content } = response.entry[0];\n\n                // retrieve user name and email\n                return { username: content?.username, email: content?.email };\n            } catch {\n                return null;\n            }\n        },\n    } as AccessService;\n}\n","import React, { createContext, FC, useContext, useMemo } from 'react';\nimport { createHttpServices } from '../../../http/services';\nimport { SupervisorService } from '../services/supervisorService';\nimport { LicenserService } from '../services/licencerService';\nimport { ConfService } from '../services/confService';\nimport { AccessService } from '../services/accessService';\n\nexport interface Services {\n    supervisorService: SupervisorService;\n    licenserService: LicenserService;\n    confService: ConfService;\n    accessService: AccessService;\n}\n\nexport const ServicesContext = createContext<Services | null>(null);\n\nexport const ServiceProvider: FC = ({ children }) => {\n    const services: Services = useMemo(() => createHttpServices(), []);\n\n    return <ServicesContext.Provider value={services}>{children}</ServicesContext.Provider>;\n};\n\nexport const useServices = (): Services => {\n    const services = useContext(ServicesContext);\n    if (!services) {\n        throw new Error('useServices must be called within ServiceProvider');\n    }\n    return services;\n};\n","import { createHttpSupervisorService } from './httpSupervisorService';\nimport { APIClient } from '../api/APIClient';\nimport { Services } from '../../ui/common/providers/ServiceProvider';\nimport { createHTTPLicenserService } from './httpLicencerService';\nimport { createHTTPConfService } from './httpConfService';\nimport { createHTTPAccessService } from './httpAccessService';\n\nexport const createHttpServices = (): Services => {\n    const apiClient = new APIClient({ shouldUseSCS: false });\n    return {\n        supervisorService: createHttpSupervisorService(apiClient),\n        licenserService: createHTTPLicenserService(apiClient),\n        confService: createHTTPConfService(apiClient),\n        accessService: createHTTPAccessService(apiClient),\n    };\n};\n","export const ONBOARDING_STATE_PENDING = 'pending';\nexport const ONBOARDING_STATE_RUNNING = 'running';\nexport const ONBOARDING_STATE_COMPLETED = 'completed';\n","import { useEffect, useRef, MutableRefObject } from 'react';\n\nexport function useInterval(\n    callback: () => void,\n    delay: number | null\n): MutableRefObject<number | undefined> {\n    const intervalRef = useRef<number>();\n    const savedCallback = useRef(callback);\n    useEffect(() => {\n        savedCallback.current = callback;\n    }, [callback]);\n    // eslint-disable-next-line consistent-return\n    useEffect(() => {\n        const tick = (): void => savedCallback.current();\n\n        if (delay !== null) {\n            intervalRef.current = window.setInterval(tick, delay);\n            return (): void => window.clearInterval(intervalRef.current);\n        }\n    }, [delay]);\n    return intervalRef;\n}\n","import styled from 'styled-components';\nimport variables from '@splunk/themes/variables';\nimport Heading from '@splunk/react-ui/Heading';\nimport Link from '@splunk/react-ui/Link';\n\nexport const AssistPendingContainer = styled.div`\n    display: flex;\n    flex-flow: column;\n    align-content: center;\n    align-items: center;\n`;\n\nexport const StyledHeading = styled(Heading)`\n    margin-top: ${variables.spacingLarge};\n`;\n\nexport const Subheading = styled(Heading)`\n    margin: 0;\n    color: ${variables.contentColorDefault};\n`;\n\nexport const ContactSupportLinkStyle = styled(Link)`\n    font-size: ${variables.fontSizeLarge};\n`;\n","export interface PendingActivationDetails {\n    title: string;\n    message: string;\n    altMessage?: string;\n}\n\nexport enum PendingActivationState {\n    INITIAL,\n    OPT_IN,\n    TENANT_CREATING,\n    COMPLETED,\n}\n\n// This will show for the title of every message.\nconst pendingActivationTitle = 'Splunk Assist is loading';\nconst activatingAssistTitle = 'Activating Splunk Assist...';\n/**\n * These are the rotating messages that appear to the user while\n * waiting for tenant_status to go from \"unknown\" to \"creating\"\n * */\nconst activatingAssistDetails: PendingActivationDetails = {\n    title: pendingActivationTitle,\n    message: activatingAssistTitle,\n    altMessage: 'This could take a few moments, stay tuned...',\n};\nconst connectingCloudServicesDetails: PendingActivationDetails = {\n    title: pendingActivationTitle,\n    message: 'Connecting to Splunk cloud services…',\n};\nconst onboardingRequestDetails: PendingActivationDetails = {\n    title: pendingActivationTitle,\n    message: 'Connected to Splunk cloud services.',\n    altMessage: 'Sending onboarding request...',\n};\nconst securingConnectionsDetails: PendingActivationDetails = {\n    title: pendingActivationTitle,\n    message: 'Establishing secure connections...',\n};\n\nexport const optInActivationDetails = [\n    activatingAssistDetails,\n    connectingCloudServicesDetails,\n    onboardingRequestDetails,\n    securingConnectionsDetails,\n];\n\n// This function handles the request to get the next optIn details message\nexport function getNextOptInActivationDetails(index: number): PendingActivationDetails {\n    if (index >= optInActivationDetails.length) {\n        return securingConnectionsDetails;\n    }\n    return optInActivationDetails[index];\n}\n\n// Function that returns each pending activation message for the UI\n// based on the activation state.\nexport function getPendingActivationDetails(\n    state: PendingActivationState,\n    index: number\n): PendingActivationDetails {\n    switch (state) {\n        case PendingActivationState.INITIAL:\n            return {\n                title: pendingActivationTitle,\n                message: activatingAssistTitle,\n                altMessage: 'This could take a few moments, stay tuned...',\n            } as PendingActivationDetails;\n        case PendingActivationState.OPT_IN:\n            return getNextOptInActivationDetails(index);\n        case PendingActivationState.TENANT_CREATING:\n            return {\n                title: pendingActivationTitle,\n                message: 'Secure connections have been established.',\n                altMessage: 'Provisioning cloud resources...',\n            } as PendingActivationDetails;\n        default:\n            return {\n                title: pendingActivationTitle,\n                message: activatingAssistTitle,\n                altMessage: 'This could take a few moments, stay tuned',\n            } as PendingActivationDetails;\n    }\n}\n","import WaitSpinner from '@splunk/react-ui/WaitSpinner';\nimport React, { FC, useState } from 'react';\nimport { createDocsURL } from '@splunk/splunk-utils/url';\nimport { useInterval } from '../../../common/hooks/useInterval';\nimport { AssistStatuses, useAssist } from '../../../common/providers/Assist/AssistContext';\nimport { TenantStatus, TenantStatusState } from '../../../common/types';\nimport {\n    AssistPendingContainer,\n    StyledHeading,\n    Subheading,\n    ContactSupportLinkStyle,\n} from './AssistPendingActivation.styles';\nimport {\n    optInActivationDetails,\n    PendingActivationState,\n    getPendingActivationDetails,\n} from './AssistPendingDetails';\n\nexport interface AssistPendingActivationProps {\n    reloadAssistContext: () => void;\n}\n\n// This is state machine to determine what the current pending activation state is.\nexport function getPendingActivationState(\n    optinStatus: AssistStatuses,\n    tenantStatus: TenantStatus,\n    assistEnabled: boolean\n): PendingActivationState {\n    if (!assistEnabled) {\n        if (tenantStatus === TenantStatusState.UNKNOWN) {\n            if (optinStatus === AssistStatuses.ENABLED) {\n                return PendingActivationState.OPT_IN;\n            }\n            return PendingActivationState.INITIAL;\n        }\n        if (\n            (tenantStatus === TenantStatusState.CREATING || tenantStatus === TenantStatusState.ACTIVE) &&\n            optinStatus === AssistStatuses.ENABLED\n        ) {\n            return PendingActivationState.TENANT_CREATING;\n        }\n    }\n    if (tenantStatus === TenantStatusState.ACTIVE && assistEnabled) {\n        return PendingActivationState.COMPLETED;\n    }\n    return PendingActivationState.OPT_IN;\n}\n\n/**\n * Pending activation can take some time so we are updating the UI with different\n * messages so that user knows that things are happening. This code will rotate\n * messages from AssistPendingOptinDetails file while commerce is creating and\n * activating the tenant. Once tenant status changes to \"creating\", anything after\n * that, that is not \"active\", will be treated like an error.\n */\nexport const AssistPendingActivation: FC<AssistPendingActivationProps> = ({ reloadAssistContext }) => {\n    const requestOptInStatusTimer = 5000; // 5 seconds\n    const rotateMessageTimer = 20000; // 15 seconds\n    const timeOutTimer = 180000; // 3 minute timer for inactivity\n\n    const [currentIndex, setCurrentIndex] = useState(0);\n    const [isActivationDelayed, setActivationDelayed] = useState(false);\n\n    // Get the current pending activation values\n    const { optinStatus, tenantStatus, assistEnabled } = useAssist();\n\n    // Using the current activation values, find activation state\n    const activationState = getPendingActivationState(optinStatus, tenantStatus, assistEnabled);\n\n    // Gets the current message to displayed based on activation state\n    const pendingStateDetails = getPendingActivationDetails(activationState, currentIndex);\n\n    // reload page at an interval to see if there is an update\n    useInterval(reloadAssistContext, requestOptInStatusTimer);\n\n    // While the user is waiting for tenant_status = \"creating\", we will show a different messages\n    // that will make it look like the activation is busy. This interval code with\n    // increment an index as long as the activate state is OPT_IN.\n    useInterval(() => {\n        if (\n            activationState === PendingActivationState.OPT_IN &&\n            currentIndex < optInActivationDetails.length\n        ) {\n            setCurrentIndex(currentIndex + 1);\n        }\n    }, rotateMessageTimer);\n\n    // This is a timer that once triggered, we will show a contact support message since\n    // the activation is taking longer than expected.\n    useInterval(() => {\n        setActivationDelayed(true);\n    }, timeOutTimer);\n\n    return (\n        <AssistPendingContainer>\n            <WaitSpinner size=\"large\" />\n            <StyledHeading level={2} style={{ color: 'white' }}>\n                {pendingStateDetails?.title}\n            </StyledHeading>\n            <Subheading level={4}>{pendingStateDetails?.message}</Subheading>\n            <Subheading level={4}>{pendingStateDetails?.altMessage}</Subheading>\n            {isActivationDelayed && (\n                <>\n                    <br />\n                    <Subheading level={4}>\n                        It looks like the activation is taking longer than expected.\n                    </Subheading>\n                    <Subheading level={4}>\n                        If this persists,{' '}\n                        <ContactSupportLinkStyle\n                            to={createDocsURL('learnmore.splunkassist.overview')}\n                            openInNewContext\n                        >\n                            contact support\n                        </ContactSupportLinkStyle>\n                    </Subheading>\n                </>\n            )}\n        </AssistPendingContainer>\n    );\n};\n","import React, { FC } from 'react';\nimport Button from '@splunk/react-ui/Button';\nimport { ColumnCenter } from '../../common/components/Center';\nimport {\n    ErrorHeading,\n    ErrorTextContainer,\n    ErrorMessage,\n} from '../../common/components/errors/ErrorPage/ErrorPage.styles';\nimport { BrokenRobot } from '../../common/components/errors/ErrorPage/broken-robot';\n\nexport const ActivationFailed: FC = () => (\n    <ColumnCenter data-test=\"activation-failed\">\n        <BrokenRobot size={12} />\n        <ErrorTextContainer>\n            <ErrorHeading level={2}>Activation Failed</ErrorHeading>\n            <ErrorMessage>Something went wrong. Contact Splunk Support.</ErrorMessage>\n            <ErrorMessage>\n                <Button\n                    to=\"https://www.splunk.com/en_us/about-splunk/contact-us.html#customer-support\"\n                    appearance=\"primary\"\n                    openInNewContext\n                >\n                    Contact Splunk Support\n                </Button>\n            </ErrorMessage>\n        </ErrorTextContainer>\n    </ColumnCenter>\n);\n","import Message from '@splunk/react-ui/Message';\nimport WaitSpinner from '@splunk/react-ui/WaitSpinner';\nimport { RemoteProps } from '@splunk/splunk-assist-remote-api';\nimport { variables } from '@splunk/themes';\nimport React, { FC, lazy, Suspense, useCallback, useState } from 'react';\nimport styled from 'styled-components';\nimport {\n    AssistPendingActivation,\n    getPendingActivationState,\n} from '../../onboarding/components/AssistPendingActivation/AssistPendingActivation';\nimport { ActivationFailed } from '../../onboarding/components/ActivationFailed';\nimport { isLoadingState } from '../hooks/useLoadAsync';\nimport { AssistStatuses, useAssist } from '../providers/Assist/AssistContext';\nimport { invalidTenantStatuses, TenantStatus } from '../types';\nimport Center from './Center';\nimport { PendingActivationState } from '../../onboarding/components/AssistPendingActivation/AssistPendingDetails';\nimport {\n    ONBOARDING_STATE_PENDING,\n    ONBOARDING_STATE_COMPLETED,\n} from '../../onboarding/common/OnboardingState';\n\nconst AssistEnabledRoutes = lazy(() => import('../routing/AssistEnabledRoutes'));\n\nconst AssistDisabledRoutes = lazy(() => import('../routing/AssistDisabledRoutes'));\n\nconst Loader: FC = () => (\n    <Center data-test=\"loader\">\n        <WaitSpinner size=\"large\" />\n    </Center>\n);\n\n/* This message is rendered within Wrapper.tsx\n   Wrapper.tsx applies a padding for the entire app. \n   We need the message to stretch the full width of the screen \n   (outside its parent container). \n*/\nconst GlobalMessage = styled(Message)`\n    margin-left: -${variables.spacingLarge};\n    margin-right: -${variables.spacingLarge};\n    margin-top: -${variables.spacingXSmall};\n    background-color: ${variables.backgroundColorFloating};\n`;\n\nconst AppContainer = styled.div`\n    overflow: auto;\n`;\n\nfunction isPending(optinStatus: AssistStatuses, tenantStatus: TenantStatus, assistEnabled: boolean): boolean {\n    const state = getPendingActivationState(optinStatus, tenantStatus, assistEnabled);\n    return state !== PendingActivationState.COMPLETED;\n}\n\n// sessionStorage only accepts strings\nconst GLOBAL_MESSAGE_HIDDEN = 'false';\nconst GLOBAL_MESSAGE_VISIBLE = 'true';\nconst GLOBAL_MESSAGE_STATUS_KEY = 'showGlobalMessage';\n\nexport const ONBOARD_STATE_LOCAL_STORAGE_KEY = 'onboardingStateLocalStorageKey';\n\nexport const AssistApp: FC<RemoteProps> = ({ context, isTest }) => {\n    const { optinStatus, loadingState, reload, tenantStatus, assistEnabled } = useAssist();\n    const [globalMessageStatus, setGlobalMessageStatus] = useState<string>(\n        sessionStorage.getItem(GLOBAL_MESSAGE_STATUS_KEY) || GLOBAL_MESSAGE_VISIBLE\n    );\n    const onRemoveGlobalMessage = useCallback(() => {\n        sessionStorage.setItem(GLOBAL_MESSAGE_STATUS_KEY, GLOBAL_MESSAGE_HIDDEN);\n        setGlobalMessageStatus(GLOBAL_MESSAGE_HIDDEN);\n    }, []);\n\n    const [onboardingState, setOnboardingState] = useState<string>(\n        sessionStorage.getItem(ONBOARD_STATE_LOCAL_STORAGE_KEY) || ONBOARDING_STATE_PENDING\n    );\n\n    const onUpdateOnboardingState = (state: string): void => {\n        sessionStorage.setItem(ONBOARD_STATE_LOCAL_STORAGE_KEY, state);\n        setOnboardingState(state);\n    };\n\n    if (isLoadingState(loadingState)) {\n        return <Loader />;\n    }\n\n    if (invalidTenantStatuses.includes(tenantStatus)) {\n        return <ActivationFailed />;\n    }\n\n    if (\n        (!assistEnabled || optinStatus === AssistStatuses.DISABLED) &&\n        onboardingState !== ONBOARDING_STATE_COMPLETED\n    ) {\n        return (\n            <Suspense fallback={<Loader />}>\n                <AssistDisabledRoutes\n                    context={context}\n                    isTest={isTest}\n                    onboardingState={onboardingState}\n                    onUpdateOnboarding={onUpdateOnboardingState}\n                />\n            </Suspense>\n        );\n    }\n\n    if (isPending(optinStatus, tenantStatus, assistEnabled)) {\n        return (\n            <Center>\n                <AssistPendingActivation reloadAssistContext={reload} />\n            </Center>\n        );\n    }\n\n    return (\n        <Suspense fallback={<Loader />}>\n            {globalMessageStatus === GLOBAL_MESSAGE_VISIBLE && (\n                <GlobalMessage\n                    data-test=\"global-message\"\n                    appearance=\"banner\"\n                    onRequestRemove={onRemoveGlobalMessage}\n                    type=\"info\"\n                >\n                    Indicator updates can take up to 1 hour to appear on this page.\n                </GlobalMessage>\n            )}\n            <AppContainer>\n                <AssistEnabledRoutes context={context} isTest={isTest} />\n            </AppContainer>\n        </Suspense>\n    );\n};\n","import React, { FC, useCallback, useMemo, useState } from 'react';\nimport { useErrorHandler } from 'react-error-boundary';\nimport { useLoadAsync } from '../../hooks/useLoadAsync';\nimport { useServices } from '../ServiceProvider';\nimport { AssistContext, AssistStatuses, AssistValue } from './AssistContext';\n\n// Provider hook to create assist value\nfunction useProvideAssist(): AssistValue {\n    const handleError = useErrorHandler();\n    const {\n        supervisorService: { getIsAssistEnabled },\n    } = useServices();\n\n    const [lastRefresh, setLastRefresh] = useState(0);\n\n    const { loadingState, value } = useLoadAsync(\n        handleError,\n        'Error verifying Splunk Assist is enabled',\n        getIsAssistEnabled,\n        { alwaysReset: false, lastRefresh }\n    );\n    const reload = useCallback((): void => {\n        setLastRefresh((old) => (old < Number.MAX_SAFE_INTEGER - 10 ? old + 1 : 0));\n    }, []);\n\n    const assistValue: AssistValue = useMemo(\n        () => ({\n            connectivityOpen: value?.connectivityOpen || false,\n            loadingState,\n            reload,\n            optinStatus: value?.optinStatus || AssistStatuses.UNKNOWN,\n            tenantStatus: value?.tenantStatus || 'unknown',\n            assistEnabled: value?.assistEnabled || false,\n            sudOptinStatus: value?.sudOptinStatus || false,\n        }),\n        [\n            value?.connectivityOpen,\n            value?.optinStatus,\n            value?.tenantStatus,\n            loadingState,\n            reload,\n            value?.assistEnabled,\n            value?.sudOptinStatus,\n        ]\n    );\n\n    return assistValue;\n}\n\nexport const AssistProvider: FC = ({ children }) => {\n    const assist = useProvideAssist();\n    return <AssistContext.Provider value={assist}>{children}</AssistContext.Provider>;\n};\n","export function loadTenant(isSE: boolean): string | undefined {\n    if (isSE) {\n        // Cannot determine the tenant in SE.\n        return undefined;\n    }\n\n    // If not SE, extract tenant from URL\n    const path = window.location.pathname;\n    if (path) {\n        const parts = path.split('/');\n        if (parts.length > 0) {\n            return parts.pop() || '';\n        }\n    }\n    return undefined;\n}\n","import { createTelemetry, Telemetry } from '@splunk/skinny-web-telemetry';\nimport { createSplunkOtelPlugin } from '@splunk/skinny-web-opentelemetry-plugin';\nimport { useMemo } from 'react';\n\nenum ASSIST_ENV_TO_TELEMETRY_ENV {\n    playground = 'play',\n    production = 'prod',\n    staging = 'stage',\n}\n\nexport const setupTelemetry = (assistEnv: string): Telemetry | undefined => {\n    /* eslint-disable react-hooks/rules-of-hooks */\n    const memoizedTelemetry = useMemo(() => {\n        const env = ASSIST_ENV_TO_TELEMETRY_ENV[assistEnv];\n        if (env === undefined) {\n            return undefined;\n        }\n\n        const telemetry = createTelemetry();\n\n        const splunkOtelPlugin = createSplunkOtelPlugin({\n            // the current appType is set to 'ec' as that is the only type that supports Assist (which is an on-prem app)\n            // as of now. Skinny web telemetry is planning to create a new appType for on-prem apps as a part of their roadmap\n            appType: 'ec',\n            appName: 'splunk-assist-telemetry',\n            environment: env,\n            shouldRemovePII: true,\n        });\n        telemetry.addPlugin(splunkOtelPlugin);\n\n        return telemetry;\n    }, [assistEnv]);\n\n    return memoizedTelemetry;\n};\n\nexport const captureDOMEvent = (targetElement: HTMLElement | null, telemetry?: Telemetry): void => {\n    let dataFound = '';\n    let currentElem = targetElement;\n    while (currentElem) {\n        if (currentElem.dataset.telemetryData) {\n            dataFound = currentElem.dataset.telemetryData;\n            break;\n        }\n        currentElem = currentElem?.parentElement;\n    }\n\n    if (dataFound) {\n        const { eventName, ...attributes } = JSON.parse(dataFound);\n        if (!eventName) {\n            return;\n        }\n        telemetry?.track(eventName, attributes);\n    }\n};\n\nexport const listenForDOMEvents = (telemetry: Telemetry, element: HTMLElement | null): void => {\n    // add listener for all onclick dom events\n    const elementToListen = element || document;\n    elementToListen.addEventListener('click', (e) => captureDOMEvent(e.target as HTMLElement, telemetry));\n\n    // in the future, we may want to add telemetry to onchange events. Debouncing is not needed\n    // for textfields as DOM onchange events only trigger when the user focuses off the element\n    // document.addEventListener('change', (e) => captureDOMEvent(e.target as HTMLElement));\n};\n\nexport default {\n    setupTelemetry,\n    captureDOMEvent,\n    listenForDOMEvents,\n};\n","import { Telemetry } from '@splunk/skinny-web-telemetry';\nimport { createContext, useContext } from 'react';\n\nexport const TelemetryContext = createContext<TelemetryContextProps>({});\n\nexport const TelemetryContextProvider = TelemetryContext.Provider;\n\nexport const useTelemetry = (): Telemetry | undefined => {\n    return useContext(TelemetryContext).telemetry;\n};\n\nexport interface TelemetryContextProps {\n    telemetry?: Telemetry;\n}\n","import React, { FC, useCallback, useEffect, useRef, useState } from 'react';\nimport { useErrorHandler } from 'react-error-boundary';\nimport { listenForDOMEvents, setupTelemetry } from './utils';\nimport { useLoadAsync } from '../ui/common/hooks/useLoadAsync';\nimport { useServices } from '../ui/common/providers/ServiceProvider';\nimport { TelemetryContextProvider } from './TelemetryContext';\n\ninterface TelemetryProviderProps {\n    /**\n     * if disableTelemetry is set, telemetry will not be collected\n     */\n    disableTelemetry: boolean;\n}\n\nexport const TelemetryProvider: FC<TelemetryProviderProps> = ({ disableTelemetry, children }) => {\n    const { confService, accessService } = useServices();\n    // state used as flag to only call listenForDOMEvents and telemetry.identify once\n    const [called, setCalled] = useState(false);\n    const providerDOM = useRef<HTMLDivElement>(null);\n\n    // Access API call\n    const handleError = useErrorHandler();\n    const userContext = useLoadAsync(\n        useCallback(() => {\n            return (): void => {};\n        }, []),\n        'Error loading current context',\n        useCallback(() => {\n            return accessService.getCurrentContext();\n        }, [accessService])\n    );\n\n    // Conf API call\n    const assistEnv = useLoadAsync(\n        handleError,\n        'Error loading assist environment info',\n        useCallback(() => {\n            return confService.getAssistEnv();\n        }, [confService])\n    );\n\n    const telemetry = disableTelemetry ? undefined : setupTelemetry(assistEnv.value || '');\n    useEffect(() => {\n        if (telemetry && !called && userContext.value?.email) {\n            telemetry.identify({\n                // could use empty string as tenant since only user email is\n                // used to identify users\n                tenant: '',\n                user: userContext.value.email,\n            });\n            listenForDOMEvents(telemetry, providerDOM.current);\n            setCalled(true);\n        }\n    }, [telemetry, userContext, setCalled, called]);\n\n    return (\n        <TelemetryContextProvider value={{ telemetry }}>\n            <div ref={providerDOM}>{children}</div>\n        </TelemetryContextProvider>\n    );\n};\n","import { RemoteProps } from '@splunk/splunk-assist-remote-api';\nimport React, { FC } from 'react';\nimport { HashRouter, useHistory } from 'react-router-dom';\nimport { AssistApp } from '../common/components/AssistApp';\nimport { Wrapper } from '../common/components/Wrapper';\nimport { AssistProvider } from '../common/providers/Assist/AssistProvider';\nimport { NavUtilsProvider } from '../common/providers/NavUtilsProvider';\nimport { RepoProvider } from '../common/providers/RepoProvider';\nimport { ServiceProvider } from '../common/providers/ServiceProvider';\nimport { loadTenant } from '../common/utils/tenant';\nimport { TelemetryProvider } from '../../telemetry/TelemetryProvider';\n\nexport const AssistRoutes: FC<RemoteProps> = ({ context, isTest }) => {\n    const history = useHistory();\n\n    // Set shouldUseSCS to true below to send requests directly to SCS Playground for testing\n    return (\n        <ServiceProvider>\n            <RepoProvider testFlags={{ shouldUseSCS: false, tenant: loadTenant(context.isSE) }}>\n                <NavUtilsProvider history={history}>\n                    <Wrapper colorScheme=\"dark\">\n                        <TelemetryProvider disableTelemetry>\n                            <AssistProvider>\n                                <AssistApp context={context} isTest={isTest} />\n                            </AssistProvider>\n                        </TelemetryProvider>\n                    </Wrapper>\n                </NavUtilsProvider>\n            </RepoProvider>\n        </ServiceProvider>\n    );\n};\n\nexport const AssistRouter: FC<RemoteProps> = (props) => {\n    return (\n        <HashRouter>\n            <AssistRoutes {...props} />\n        </HashRouter>\n    );\n};\n\nexport default AssistRouter;\n"],"sourceRoot":""}